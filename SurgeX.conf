# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com


# Self-use sgmodule:

# Block Advertising for Surge - https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Module/Block/Advertising.sgmodule

# Block YouTube Advertising - https://raw.githubusercontent.com/Maasea/sgmodule/master/YouTube.Enhance.sgmodule

# iRingo: Location - https://raw.githubusercontent.com/VirgilClyne/iRingo/main/sgmodule/Location.sgmodule

# iRingo: Maps - https://raw.githubusercontent.com/VirgilClyne/iRingo/main/sgmodule/Maps.sgmodule

# iRingo: Siri & Search - https://raw.githubusercontent.com/VirgilClyne/iRingo/main/sgmodule/Siri.sgmodule

# BoxJs - https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.surge.sgmodule

# iRingo.boxjs.json - https://github.com/VirgilClyne/iRingo/raw/main/BoxJs/iRingo.BoxJs.json

[General]
# Update-2024.7.23.9.19

# Internet æµ‹è¯• URL
internet-test-url = http://www.apple.com/library/test/success.html

# ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://cp.cloudflare.com/generate_204

# è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

# å…è®¸ Wi-Fi è®¿é—® (ä»… iOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œfalseã€æ”¹ä¸ºã€Œtrueã€)
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153

# å…è®¸ Wi-Fi è®¿é—® (ä»… macOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œ127.0.0.1ã€æ”¹ä¸ºã€Œ0.0.0.0ã€)
http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153

# å…è®¸ä¸ªäººçƒ­ç‚¹è®¿é—®
allow-hotspot-access = true

# Webæ§åˆ¶å™¨
# Safariè¾“å…¥127.0.0.1:6171ï¼Œå¡«å…¥HTTP-APIå¯†ç å³å¯ã€‚
http-api-web-dashboard = true

# HTTP-API
# ä¾æ¬¡ä¸ºï¼šå¯†ç ï¼Œä¸»æœºåï¼Œç«¯å£
http-api = Brian@0.0.0.0:6171

# HTTP-API-TLS
http-api-tls = false

# ç»•è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local, seed-sequoia.siri.apple.com, sequoia.siri.apple.com, sequoia.apple.com, iosapps.itunes.apple.com, passenger.t3go.cn, www.baidu.com, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, www.shanbay.com, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com

# æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# DNS æœåŠ¡å™¨
dns-server = system

# DNS åŠ«æŒ
hijack-dns = *:53

# åŠ å¯†çš„DNSæœåŠ¡å™¨ (å¦‚æ— å¿…è¦ä¸å»ºè®®ä½¿ç”¨)
# encrypted-dns-server = h3://223.5.5.5/dns-query, quic://dns.alidns.com

# ä» /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true

# å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true

# Always Real IP Hosts
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com, easy-login.10099.com.cn,*-update.xoyocdn.com, *.prod.cloud.netflix.com, appboot.netflix.com, *-appboot.netflix.com

# VIF Excluded Routes
tun-excluded-routes = 239.255.255.250/32

# UDP å›é€€è¡Œä¸º
# (å¹¶éæ‰€æœ‰ä»£ç†æœåŠ¡å™¨éƒ½æ”¯æŒ UDP è½¬å‘ï¼Œå½“ä¸€ä¸ª UDP ä¼šè¯å°è¯•ä½¿ç”¨ä¸€ä¸ªä¸æ”¯æŒ UDP è½¬å‘çš„ä»£ç†æœåŠ¡å™¨æ—¶ï¼ŒSurge ä¼šé»˜è®¤å›é€€è‡³ç›´è¿ã€‚å¯ä¿®æ”¹ä¸ºé˜»æ­¢ä»¥é¿å…æ½œåœ¨çš„éšç§æ³„éœ²éšæ‚£ã€‚)
udp-policy-not-supported-behaviour = DIRECT

# éšè— VPN å›¾æ ‡
hide-vpn-icon = false

# ä»£ç†æ¥ç®¡
compatibility-mode = 1

[Ponte]
server-proxy-name = PROXY

[Proxy]
CT-HOME ğŸ  SS = ss, 6189179.xyz, 19151, encrypt-method=aes-128-gcm, password=gmznb, udp-relay=true, test-url=http://oa.fcheng.com

[Proxy Group]
# æœºåœºä¿¡æ¯ (encodeåœ°å€é“¾æ¥: https://www.urlencoder.orgï¼‰
#FlowerCloud = select, policy-path=http://sub.info?url=[URL encode åçš„æœºåœºèŠ‚ç‚¹é“¾æ¥]&due_day=9&alert=1&title=flowercloud, update-interval=3600, hidden=false

# åŒºåŸŸä»£ç†é€‰æ‹©
PROXY = select, HK, TW, JP, SG, US, ğŸ  Home_subnet

# å…œåº•ç­–ç•¥
Final = select, HK, TW, JP, SG, US, DIRECT

# æ–°æµªå¾®åš
Weibo = select, DIRECT, HK, TW, JP, SG, US, ğŸ  Home_subnet

# YouTube è§†é¢‘
YouTube = select, HK, TW, JP, SG, US, ğŸ  Home_subnet

# Telegram æœåŠ¡
Telegram = select, HK, TW, JP, SG, US, ğŸ  Home_subnet

# å›½é™…æµåª’ä½“æœåŠ¡
Streaming = select,HK, TW, JP, SG, US, ğŸ  Home_subnet

# Home_subnet
ğŸ  Home_subnet = subnet, default = CT-HOME ğŸ  SS, "SSID:Gmz-5g" = DIRECT, hidden = true

# é¦™æ¸¯èŠ‚ç‚¹
HK = smart, policy-path=https://v1.mk/LuZqwCf, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK), hidden=false

# å°æ¹¾èŠ‚ç‚¹
TW = smart, policy-path=https://v1.mk/LuZqwCf, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW), hidden=false

# æ—¥æœ¬èŠ‚ç‚¹
JP = smart, policy-path=https://v1.mk/LuZqwCf, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP), hidden=false

# æ–°åŠ å¡èŠ‚ç‚¹
SG = smart, policy-path=https://v1.mk/LuZqwCf, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG), hidden=false

# ç¾å›½èŠ‚ç‚¹
US = smart, policy-path=https://v1.mk/LuZqwCf, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US), hidden=false

[Rule]
SUBNET,SSID:Gmz-5g,DIRECT
DOMAIN,immortalwrt.lan,ğŸ  Home_subnet
IP-CIDR,192.168.8.1/24,ğŸ  Home_subnet,no-resolve
# Custom
DEST-PORT,123,DIRECT

# å±è”½ HTTP3/QUIC åè®®
# é˜»æ­¢æ‰€æœ‰ UDP æµé‡è¿›å…¥443ç«¯å£ï¼Œä½¿ HTTP3 è¯·æ±‚å›è½åˆ° TCP æµé‡ã€‚
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP

# Safari è®¿é—®é˜²è·³è½¬ App
DOMAIN,app-site-association.cdn-apple.com,REJECT

# Boxjs ä»£ç†
DOMAIN-KEYWORD,jsdelivr.net,PROXY

# Sub-Store çš„ Web é¡µé¢
DOMAIN-SUFFIX,vercel.app,PROXY

# TestFlight å•†åº—
DOMAIN,beta.apple.com,PROXY
DOMAIN,testflight.apple.com,PROXY
DOMAIN-KEYWORD,testflight,PROXY

# Direct+
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct+.list,DIRECT,extended-matching

# Reject
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Advertising.list,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules.list,REJECT,extended-matching

# æ–°æµªå¾®åš (å›½å†…ç”¨æˆ·å»ºè®®ç›´è¿ï¼‰
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Weibo/Weibo.list,Weibo,extended-matching

# YouTube è§†é¢‘
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/Video/YouTube.list,YouTube,extended-matching

# Telegram åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/telegram.conf,Telegram,extended-matching
# Telegram å®˜æ–¹åœ¨ https://core.telegram.org/resources/cidr.txt åˆ—å‡ºçš„ Telegram IP æ®µ
RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,Telegram,no-resolve
# éå®˜æ–¹æ”¶é›†çš„ Telegram ASN åˆ—è¡¨
# RULE-SET,https://ruleset.skk.moe/List/ip/telegram_asn.conf,Telegram
# é™é»˜ä¸¢å¼ƒ Telegram å®¢æˆ·ç«¯å‘èµ·çš„ã€ç›®æ ‡é Telegram åŸŸåå’Œ IP çš„å…¶ä»–è¿æ¥
PROCESS-NAME,Telegram,REJECT-DROP

# Streaming!CN
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/!CN.list,Streaming,extended-matching

# Twitter
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/X.list,PROXY,extended-matching

# GitHub
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,PROXY,extended-matching

# Proxy
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy.list,PROXY,extended-matching

# Apple
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Apple/Apple.list,DIRECT,extended-matching

# Direct
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct.list,DIRECT,extended-matching

# è…¾è®¯ WeChat ASN
IP-ASN,132203,DIRECT
IP-ASN,56040,DIRECT
IP-ASN,45090,DIRECT
# è…¾è®¯ WeChat
RULE-SET,https://raw.githubusercontent.com/NobyDa/Script/master/Surge/WeChat.list,DIRECT

# Local Area Network
RULE-SET,LAN,DIRECT

# GeoIP China
GEOIP,CN,DIRECT

# Proxy+
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy+.list,PROXY

# Final å…œåº•
FINAL,Final,dns-failed

[Host]
# Apple
apple.com = server:223.5.5.5
*icloud.com = server:223.5.5.5
*icloud.com.cn = server:223.5.5.5
*testflight.apple.com = server:8.8.4.4
*.apple.com = server:https://doh.dns.apple.com/dns-query
*.itunes.com = server:https://doh.dns.apple.com/dns-query

# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

# Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29

# PlayStation
*.dl.playstation.net = server:119.29.29.29
6189179.xyz = server:223.5.5.5

[SSID Setting]
DDPAI_K5_63F0 suspend=true

[MITM]
# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true

# MITM over HTTP/2
h2 = true

hostname = duckduckgo.com, *.google.cn, *.google.com.hk, sub.store, boxer.baidu.com, api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, security.wechat.com, weixin110.qq.com, testflight.apple.com, pan.baidu.com, m.douban.com, h5.xiuxiu.meitu.com, api.xiuxiu.meitu.com, *.baidu.com, www.zhihu.com, *.cloudflareclient.com
hostname-disabled = *.cloudflareclient.com
ca-passphrase = 3A27DB2D
ca-p12 = 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
